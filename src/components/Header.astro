---
import HeaderLink from "./HeaderLink.astro";
import { SITE_TITLE, GITHUB_PROFILE_URL, TWITTER_PROFILE_URL } from "../consts";
import { Binary, Github, Twitter } from "lucide-astro";
import { getUrlWithBase } from "../utils";
---

<header class="py-8 flex items-center justify-between w-full">
  <nav class="flex items-center w-full flex-col md:flex-row gap-4">
    <div
      class="md:flex-grow md:basis-0 flex items-center justify-between gap-2 w-full md:w-auto"
    >
      <h2 class="flex gap-2 items-center">
        <span class="hidden md:block">
          <Binary />
        </span>
        <a href={getUrlWithBase("")} class="text-2xl font-bold">{SITE_TITLE}</a>
      </h2>
      <ul class="flex md:hidden items-center justify-end gap-4">
        <HeaderLink href={GITHUB_PROFILE_URL}>
          <Github />
        </HeaderLink>
        <HeaderLink href={TWITTER_PROFILE_URL}>
          <Twitter />
        </HeaderLink>
      </ul>
    </div>

    <ul class="flex items-center gap-4">
      <HeaderLink href={getUrlWithBase("")}>HOME</HeaderLink>
      <span>|</span>
      <HeaderLink href={getUrlWithBase("blog/")}>BLOG</HeaderLink>
      <span>|</span>
      <HeaderLink href={getUrlWithBase("blog/aviso_legal")}
        >AVISO LEGAL</HeaderLink
      >
    </ul>
    <ul
      class="hidden md:flex md:flex-grow md:basis-0 items-center justify-end gap-4"
    >
      <HeaderLink href={GITHUB_PROFILE_URL}>
        <Github />
      </HeaderLink>
      <HeaderLink href={TWITTER_PROFILE_URL}>
        <Twitter />
      </HeaderLink>
    </ul>
  </nav>
</header>

<script>
  const links = document.querySelectorAll(
    ".head-link",
  ) as NodeListOf<HTMLAnchorElement>;
  const pathname = location.href;
  const className = "text-primary";

  links.forEach((link) => {
    const addOrRemove = pathname === link.href ? "add" : "remove";
    link.classList[addOrRemove](className);
  });
</script>
